"use strict";var express=require("express"),path=require("path"),mongoose=require("mongoose"),mongodb=require("mongodb"),cookieParser=require("cookie-parser"),logger=require("morgan"),Apple=require("./models/Apple");require("dotenv").config();var connectionString=process.env.MONGO_CON;(mongoose=require("mongoose")).connect(connectionString,{useNewUrlParser:!0,useUnifiedTopology:!0});var db=mongoose.connection;db.on("error",console.error.bind(console,"MongoDB connectionerror:")),db.once("open",function(){console.log("Connection to DB succeeded")});var indexRouter=require("./routes/index"),usersRouter=require("./routes/users"),AppleRouter=require("./routes/Apple"),gridbuildRouter=require("./routes/gridbuild"),selectorRouter=require("./routes/selector"),resourceRouter=require("./routes/resource"),app=express();function recreateDB(){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(Apple.deleteMany());case 2:new Apple({Apple_colour:"red",Apple_price:"50",Apple_quantity:100}).save(function(e,r){if(e)return console.error(e);console.log("First Apple details saved")}),new Apple({Apple_colour:"green",Apple_price:"120",Apple_quantity:200}).save(function(e,r){if(e)return console.error(e);console.log("Second Apple details saved")}),new Apple({Apple_colour:"purple",Apple_price:"90",Apple_quantity:200}).save(function(e,r){if(e)return console.error(e);console.log("Third Apple details saved")});case 8:case"end":return e.stop()}})}app.set("views",path.join(__dirname,"views")),app.set("view engine","pug"),app.use(logger("dev")),app.use(express.json()),app.use(express.urlencoded({extended:!1})),app.use(cookieParser()),app.use(express.static(path.join(__dirname,"public"))),app.use("/",indexRouter),app.use("/users",usersRouter),app.use("/Apple",AppleRouter),app.use("/gridbuild",gridbuildRouter),app.use("/selector",selectorRouter),app.use("/resource",resourceRouter);var reseed=!0;reseed&&recreateDB(),app.use(function(e,r,o){o(createError(404))}),app.use(function(e,r,o,s){o.locals.message=e.message,o.locals.error="development"===r.app.get("env")?e:{},o.status(e.status||500),o.render("error")}),module.exports=app;
//# sourceMappingURL=app.min.js.map
